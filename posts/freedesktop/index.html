<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> <title id="site-title">Freedesktopé‚£äº›ç ´äº‹ | c0ldcat's blog</title> <link rel="icon" href="/c0ldcat.png"> <link rel="stylesheet" type="text/css" href="/css/main.css"> <link rel="alternate" type="application/rss+xml" title="RSS Feed for c0ldcat's blog" href="/feed.xml" /> <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script> <script type="text/javascript" src="/js/jquery.typetype.min.js"></script> <script> var _hmt = _hmt || []; (function () { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?e1acee033923881f5528a3b4a658039b"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script> <style> .block-left { background-size: cover; background-position-x: right; } </style> <!-- Begin Jekyll SEO tag v2.4.0 --> <title>Freedesktopé‚£äº›ç ´äº‹ | c0ldcatâ€™s blog</title> <meta name="generator" content="Jekyll v3.7.3" /> <meta property="og:title" content="Freedesktopé‚£äº›ç ´äº‹" /> <meta name="author" content="c0ldcat" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Desktop entries" /> <meta property="og:description" content="Desktop entries" /> <link rel="canonical" href="//blog.c0ldcat.ml/posts/freedesktop/" /> <meta property="og:url" content="//blog.c0ldcat.ml/posts/freedesktop/" /> <meta property="og:site_name" content="c0ldcatâ€™s blog" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2017-02-05T16:32:44+08:00" /> <script type="application/ld+json"> {"@type":"BlogPosting","datePublished":"2017-02-05T16:32:44+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"//blog.c0ldcat.ml/posts/freedesktop/"},"url":"//blog.c0ldcat.ml/posts/freedesktop/","author":{"@type":"Person","name":"c0ldcat"},"description":"Desktop entries","headline":"Freedesktopé‚£äº›ç ´äº‹","dateModified":"2017-02-05T16:32:44+08:00","@context":"http://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <div class="block-left"> <div class="content"> <div class="main-info"> <a href="/" class="logo"><img src="/images/c0ldcat-pure-white.svg" class="logo"></a> <h1> <span id="author-name">c0ldcat</span><span>&#39;s blog</span> </h1> <ul> <li><a href="/posts" class="emoji-nav">ğŸ–Šï¸</a></li> <li><a href="/projects" class="emoji-nav">ğŸˆ</a></li> <li><a href="/tags" class="emoji-nav">ğŸ”–</a></li> <li><a href="/love" class="emoji-nav">â¤ï¸</a></li> </ul> </div> </div> <canvas></canvas> </div> <div id="pages" class="block-right"> <div class="inner-post content"> <h1>Freedesktopé‚£äº›ç ´äº‹</h1> <div class="date-highlight">05 Feb 2017</div> <h2 id="desktop-entries">Desktop entries</h2> <p>æ¡Œé¢é…ç½®é¡¹æ˜¯æè¿°å¦‚ä½•å¯åŠ¨ç¨‹åº, å¦‚ä½•å¤„ç†æ•°æ®çš„é…ç½®æ–‡ä»¶, å®ƒä»¬è¿˜ä¼šå’Œèœå•è§„èŒƒåŒæ­¥ä½œç”¨, å®šä¹‰ä¸€ä¸ªç¨‹åºåœ¨èœå•ä¸­çš„æ˜¾ç¤ºå›¾æ ‡. å¤§éƒ¨åˆ†æ¡Œé¢é…ç½®é¡¹æ˜¯ .desktop å’Œ .directory æ–‡ä»¶.</p> <p><a href="https://specifications.freedesktop.org/desktop-entry-spec/desktop-entry-spec-latest.html">Desktop Entryæ ‡å‡†</a></p> <p>ä¸€ä¸ªå…¸å‹ä¾‹å­:</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[<span class="n">Desktop</span> <span class="n">Entry</span>]

<span class="c"># The type as listed above
</span><span class="n">Type</span>=<span class="n">Application</span>

<span class="c"># The version of the desktop entry specification to which this file complies
</span><span class="n">Version</span>=<span class="m">1</span>.<span class="m">0</span>

<span class="c"># The name of the application
</span><span class="n">Name</span>=<span class="n">jMemorize</span>

<span class="c"># A comment which can/will be used as a tooltip
</span><span class="n">Comment</span>=<span class="n">Flash</span> <span class="n">card</span> <span class="n">based</span> <span class="n">learning</span> <span class="n">tool</span>

<span class="c"># The path to the folder in which the executable is run
</span><span class="n">Path</span>=/<span class="n">opt</span>/<span class="n">jmemorise</span>

<span class="c"># The executable of the application, possibly with arguments.
</span><span class="n">Exec</span>=<span class="n">jmemorize</span>

<span class="c"># The name of the icon that will be used to display this entry
</span><span class="n">Icon</span>=<span class="n">jmemorize</span>

<span class="c"># Describes whether this application needs to be run in a terminal or not
</span><span class="n">Terminal</span>=<span class="n">false</span>

<span class="c"># Describes the categories in which this entry should be shown
</span><span class="n">Categories</span>=<span class="n">Education</span>;<span class="n">Languages</span>;<span class="n">Java</span>;
</code></pre></div></div> <h3 id="startupwmclasså±æ€§">StartupWMClasså±æ€§</h3> <p>æœ‰äº›Applicationä¼šç”¨åˆ°å¾ˆå¤šçª—å£, éœ€è¦desktopæ¥å®šä¹‰å®ƒä»¬çš„å›¾æ ‡å’Œå¯¹åº”çš„ç›®å½•, è¿™é‡Œå°±è¦ç”¨åˆ°WM_CLASS.</p> <p>æ›´å…·startup-notificationçš„å®šä¹‰, WMClass is a string to match against the â€œresource nameâ€ or â€œresource classâ€ hints.</p> <p>æ—¶å°šçš„Desktop environmentsæ¯”å¦‚Gnome 3,Unity, KDEç­‰ä¼šç”¨WMClassæ¥åˆ¤æ–­ä¸€ä¸ªWindowå±äºå“ªä¸ªApplicationå¹¶èµ‹äºˆç›¸åº”çš„è¡Œä¸ºå’Œå±æ€§.</p> <p>æˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡<code class="highlighter-rouge">xprop</code>æ¥ç¡®å®šä¸€ä¸ªçª—å£çš„WMClass.</p> <p><code class="highlighter-rouge">xprop WM_CLASS</code></p> <p>ç„¶åç‚¹å‡»çª—å£</p> <p><code class="highlighter-rouge">WM_CLASS(STRING) = "atom", "Atom"</code></p> <p>è¿™é‡Œçš„atomæˆ–è€…Atomå°±æ˜¯WM_CLASS, ä»»é€‰å…¶ä¸€ä½œä¸ºStartupWMClasså°±è¡Œäº†.</p><pre><code class="language-confG">[Desktop Entry]
Name=Atom
Comment=A hackable text editor for the 21st Century.
GenericName=Text Editor
Exec=env PYTHON=python2 /usr/share/atom/atom %U
Icon=atom-editor
Type=Application
StartupNotify=true
StartupWMClass=Atom
Categories=GNOME;GTK;Utility;TextEditor;Development;
MimeType=text/plain;
</code></pre><h2 id="default-application">Default Application</h2> <p>è®¾ç½®é»˜è®¤åº”ç”¨å‰å…ˆè¦äº†è§£<a href="#mine-type">MINE Type</a></p> <p>å¤§ä½“ä¸Šåˆ†ä¸ºæ„ä¸‹å‡ ç§æ–¹æ³•:</p> <h3 id="environment-variables">Environment variables</h3> <p>å¯¹äºå¤§å¤šæ•°å‘½ä»¤è¡Œç¯å¢ƒæ¥è¯´, é€šå¸¸æ˜¯è®¾ç½®ç¯å¢ƒå˜é‡, æœ€å¸¸è§çš„æœ‰<code class="highlighter-rouge">BROWSER</code>ä»£è¡¨é»˜è®¤æµè§ˆå™¨å’Œ<code class="highlighter-rouge">EDITOR</code>ä»£è¡¨é»˜è®¤ç¼–è¾‘å™¨ç­‰ç­‰.</p> <h3 id="ç›´æ¥ç”¨deæä¾›çš„å›¾å½¢æ¥å£">ç›´æ¥ç”¨DEæä¾›çš„å›¾å½¢æ¥å£</h3> <p>å°±æ˜¯ç»å¸¸åœ¨Ubuntuç­‰ç­‰æ–°æ‰‹å…¥é—¨é‡Œçœ‹è§çš„, åœ¨è®¾ç½®é‡Œ, å¯¹äºGnomeæ¥è¯´åœ¨Settings-&gt;Details-&gt;Default Applications</p> <p><img src="/images/2017-02-05-freedesktop/gnome-settings.png" alt="" /></p> <h3 id="xdg-standard">XDG standard</h3> <p><a href="https://specifications.freedesktop.org/mime-apps-spec/mime-apps-spec-1.0.html">è¯¦ç»†æ ‡å‡†</a></p> <p>æ–‡ä»¶ä½ç½®:</p> <table> <thead> <tr> <th>Path</th> <th>Usage</th> </tr> </thead> <tbody> <tr> <td>~/.config/mimeapps.list</td> <td>user overrides</td> </tr> <tr> <td>/etc/xdg/mimeapps.list</td> <td>system-wide overrides</td> </tr> <tr> <td>~/.local/share/applications/mimeapps.list</td> <td>(deprecated) user overrides</td> </tr> <tr> <td>/usr/local/share/applications/mimeapps.list <br /> /usr/share/applications/mimeapps.list</td> <td>distribution-provided defaults</td> </tr> </tbody> </table> <p>æ–‡ä»¶æ ¼å¼:</p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># mineapps.list
# è¿™äº›åº”ç”¨å¯ä»¥æ‰“å¼€è¿™ç±»æ–‡ä»¶
</span>[<span class="n">Added</span> <span class="n">Associations</span>]
<span class="n">image</span>/<span class="n">jpeg</span>=<span class="n">bar</span>.<span class="n">desktop</span>;<span class="n">baz</span>.<span class="n">desktop</span>
<span class="n">video</span>/<span class="n">H264</span>=<span class="n">bar</span>.<span class="n">desktop</span>
<span class="c"># è¿™äº›åº”ç”¨ä¸åº”è¯¥è¢«ç”¨æ¥æ‰“å¼€è¿™ç±»æ–‡ä»¶
</span>[<span class="n">Removed</span> <span class="n">Associations</span>]
<span class="n">video</span>/<span class="n">H264</span>=<span class="n">baz</span>.<span class="n">desktop</span>
<span class="c"># æœ€å¥½ç”¨è¿™äº›åº”ç”¨æ‰“å¼€è¿™ç±»æ–‡ä»¶
</span>[<span class="n">Default</span> <span class="n">Applications</span>]
<span class="n">image</span>/<span class="n">jpeg</span>=<span class="n">foo</span>.<span class="n">desktop</span>
</code></pre></div></div> <h2 id="mine-type">MINE Type</h2> <p>äº’è”ç½‘åª’ä½“ç±»å‹(Internet media type, ä¹Ÿç§°ä¸ºMIMEç±»å‹(MIME type)æˆ–å†…å®¹ç±»å‹(content type))æ˜¯ç»™äº’è”ç½‘ä¸Šä¼ è¾“çš„å†…å®¹èµ‹äºˆçš„åˆ†ç±»ç±»å‹.</p> <p>ä¸€ä¸ªMIMEç±»å‹åŒ…æ‹¬ä¸€ä¸ªç±»å‹(type), ä¸€ä¸ªå­ç±»å‹(subtype). æ­¤å¤–å¯ä»¥åŠ ä¸Šä¸€ä¸ªæˆ–å¤šä¸ªå¯é€‰å‚æ•°(optional parameter). å…¶æ ¼å¼ä¸º</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ç±»å‹å / å­ç±»å‹å [ ; å¯é€‰å‚æ•° ]
</code></pre></div></div> <h3 id="å¦‚ä½•åœ¨linuxä¸‹è·å–fileçš„mine-type">å¦‚ä½•åœ¨Linuxä¸‹è·å–fileçš„MINE Type</h3> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>file <span class="nt">-i</span> favicon.svg
<span class="c">#output: favicon.svg: image/svg+xml; charset=us-ascii</span>
</code></pre></div></div> <div class="date-highlight"> <!--2--> <a class="tag" href="/tag/linux">Linux</a> &nbsp;&sdot;&nbsp; <a class="tag" href="/tag/freedesktop">Freedesktop</a> </div> </div> </div> <script src="/js/canvas.js"></script> <script> (function() { var img = new Image(); function getResult(event) { var imgType = "png"; (event && event.type === 'load' ? img.width == 1 : false) && (imgType = "webp"); $(".block-left").css("background-image", "linear-gradient(rgba(44, 45, 51, 0.8), rgba(44, 45, 51, 0.8)), url(/images/background.png)".replace(/\.png/,"." + imgType)); } img.onerror = getResult; img.onload = getResult; img.src = 'data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA='; })(); </script> </body> </html>
