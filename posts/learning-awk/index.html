<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> <title id="site-title">AWKç®€æ˜æ•™ç¨‹ | c0ldcat's blog</title> <link rel="icon" href="/c0ldcat.png"> <link rel="stylesheet" type="text/css" href="/css/main.css"> <link rel="alternate" type="application/rss+xml" title="RSS Feed for c0ldcat's blog" href="/feed.xml" /> <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script> <script type="text/javascript" src="/js/jquery.typetype.min.js"></script> <script> var _hmt = _hmt || []; (function () { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?e1acee033923881f5528a3b4a658039b"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script> <style> .block-left { background-size: cover; background-position-x: right; } </style> <!-- Begin Jekyll SEO tag v2.4.0 --> <title>AWKç®€æ˜æ•™ç¨‹ | c0ldcatâ€™s blog</title> <meta name="generator" content="Jekyll v3.7.3" /> <meta property="og:title" content="AWKç®€æ˜æ•™ç¨‹" /> <meta name="author" content="c0ldcat" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="è½¬è‡ªAWK ç®€æ˜æ•™ç¨‹ åŸä½œè€…:é™ˆçš“" /> <meta property="og:description" content="è½¬è‡ªAWK ç®€æ˜æ•™ç¨‹ åŸä½œè€…:é™ˆçš“" /> <link rel="canonical" href="//blog.c0ldcat.ml/posts/learning-awk/" /> <meta property="og:url" content="//blog.c0ldcat.ml/posts/learning-awk/" /> <meta property="og:site_name" content="c0ldcatâ€™s blog" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2017-07-05T23:03:12+08:00" /> <script type="application/ld+json"> {"@type":"BlogPosting","datePublished":"2017-07-05T23:03:12+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"//blog.c0ldcat.ml/posts/learning-awk/"},"url":"//blog.c0ldcat.ml/posts/learning-awk/","author":{"@type":"Person","name":"c0ldcat"},"description":"è½¬è‡ªAWK ç®€æ˜æ•™ç¨‹ åŸä½œè€…:é™ˆçš“","headline":"AWKç®€æ˜æ•™ç¨‹","dateModified":"2017-07-05T23:03:12+08:00","@context":"http://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <div class="block-left"> <div class="content"> <div class="main-info"> <a href="/" class="logo"><img src="/images/c0ldcat-pure-white.svg" class="logo"></a> <h1> <span id="author-name">c0ldcat</span><span>&#39;s blog</span> </h1> <ul> <li><a href="/posts" class="emoji-nav">ğŸ–Šï¸</a></li> <li><a href="/projects" class="emoji-nav">ğŸˆ</a></li> <li><a href="/tags" class="emoji-nav">ğŸ”–</a></li> <li><a href="/love" class="emoji-nav">â¤ï¸</a></li> </ul> </div> </div> <canvas></canvas> </div> <div id="pages" class="block-right"> <div class="inner-post content"> <h1>AWKç®€æ˜æ•™ç¨‹</h1> <div class="date-highlight">05 Jul 2017</div> <blockquote> <p>è½¬è‡ª<a href="http://coolshell.cn/articles/9070.html">AWK ç®€æ˜æ•™ç¨‹</a></p> <p>åŸä½œè€…:<a href="http://coolshell.cn/articles/author/haoel">é™ˆçš“</a></p> </blockquote> <p>æœ‰ä¸€äº›ç½‘å‹çœ‹äº†å‰ä¸¤å¤©çš„ã€Š<a href="http://coolshell.cn/articles/8883.html">Linuxä¸‹åº”è¯¥çŸ¥é“çš„æŠ€å·§</a>ã€‹å¸Œæœ›æˆ‘èƒ½æ•™æ•™ä»–ä»¬ç”¨awkå’Œsedï¼Œæ‰€ä»¥ï¼Œå‡ºç°äº†è¿™ç¯‡æ–‡ç« ã€‚æˆ‘ä¼°è®¡è¿™äº›80åçš„å¹´è½»æœ‹å‹å¯èƒ½å¯¹awk/sedè¿™ç±»ä¸Šå¤ç¥å™¨æœ‰ç‚¹é™Œç”Ÿäº†ï¼Œæ‰€ä»¥éœ€è¦æˆ‘è¿™ä¸ªè€å®¶ä¼™æ¥ç‚’ç‚’å†·é¥­ã€‚<strong>å†µä¸”ï¼ŒAWKæ˜¯è´å°”å®éªŒå®¤1977å¹´æå‡ºæ¥çš„æ–‡æœ¬å‡ºç°ç¥å™¨ï¼Œä»Šå¹´æ˜¯è›‡å¹´ï¼Œæ˜¯AWKçš„æœ¬å‘½å¹´ï¼Œè€Œä¸”å¹´çºªå’Œæˆ‘ç›¸ä»¿ï¼Œæ‰€ä»¥éå¸¸æœ‰å¿…è¦ä¸ºä»–å†™ç¯‡æ–‡ç« </strong>ã€‚</p> <p>ä¹‹æ‰€ä»¥å«AWKæ˜¯å› ä¸ºå…¶å–äº†ä¸‰ä½åˆ›å§‹äººÂ <a href="http://en.wikipedia.org/wiki/Alfred_Aho">Alfred Aho</a>ï¼Œ<a href="http://en.wikipedia.org/wiki/Peter_J._Weinberger">Peter Weinberger</a>, å’ŒÂ <a href="http://en.wikipedia.org/wiki/Brian_Kernighan">Brian Kernighan</a>Â çš„Family Nameçš„é¦–å­—ç¬¦ã€‚è¦å­¦AWKï¼Œå°±å¾—æä¸€æAWKçš„ä¸€æœ¬ç›¸å½“ç»å…¸çš„ä¹¦ã€Š<a href="http://plan9.bell-labs.com/cm/cs/awkbook/">The AWK Programming Language</a>ã€‹ï¼Œå®ƒåœ¨<a href="http://book.douban.com/subject/1876898/">è±†ç“£ä¸Šçš„è¯„åˆ†</a>æ˜¯9.4åˆ†ï¼åœ¨<a href="http://www.amazon.cn/mn/detailApp/?asin=020107981X">äºšé©¬é€Šä¸Šå±…ç„¶å–1022.30å…ƒ</a>ã€‚</p> <p>æˆ‘åœ¨è¿™é‡Œçš„æ•™ç¨‹å¹¶ä¸æƒ³é¢é¢ä¿±åˆ°ï¼Œæœ¬æ–‡å’Œæˆ‘ä¹‹å‰çš„<a href="http://coolshell.cn/articles/8460.html">Goè¯­è¨€ç®€ä»‹</a>ä¸€æ ·ï¼Œå…¨æ˜¯ç¤ºä¾‹ï¼ŒåŸºæœ¬æ— åºŸè¯ã€‚</p> <p><strong>æˆ‘åªæƒ³è¾¾åˆ°ä¸¤ä¸ªç›®çš„ï¼š</strong></p> <p><strong>1ï¼‰ä½ å¯ä»¥åœ¨ä¹˜åå…¬äº¤åœ°é“ä¸Šä¸‹ç­ï¼Œæˆ–æ˜¯åœ¨åé©¬æ¡¶æ‹‰å¤§ä¾¿æ—¶è¯»å®Œï¼ˆä¿è¯æ˜¯ä¸€æ³¡å¤§ä¾¿çš„å·¥å¤«ï¼‰ã€‚</strong></p> <p><strong>2ï¼‰æˆ‘åªæƒ³è®©è¿™ç¯‡åšæ–‡åƒä¸€ä¸ªç«è¾£çš„è„±è¡£èˆå¥³æŒ‘èµ·ä½ çš„å…´è¶£ï¼Œç„¶åè¿˜è¦ä½ è‡ªå·±å»ä¸‹å·¥å¤«å»æ’¸ã€‚</strong></p> <p>åºŸè¯å°‘è¯´ï¼Œæˆ‘ä»¬å¼€å§‹è„±å§ï¼ˆæ³¨ï¼šè¿™é‡Œåªæ˜¯toplessï¼‰ã€‚</p> <h2 id="èµ·æ­¥ä¸Šå°">èµ·æ­¥ä¸Šå°</h2> <p>æˆ‘ä»netstatå‘½ä»¤ä¸­æå–äº†å¦‚ä¸‹ä¿¡æ¯ä½œä¸ºç”¨ä¾‹ï¼š</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat </span>netstat.txt
Proto Recv-Q Send-Q Local-Address          Foreign-Address             State
tcp        0      0 0.0.0.0:3306           0.0.0.0:<span class="k">*</span>                   LISTEN
tcp        0      0 0.0.0.0:80             0.0.0.0:<span class="k">*</span>                   LISTEN
tcp        0      0 127.0.0.1:9000         0.0.0.0:<span class="k">*</span>                   LISTEN
tcp        0      0 coolshell.cn:80        124.205.5.146:18245         TIME_WAIT
tcp        0      0 coolshell.cn:80        61.140.101.185:37538        FIN_WAIT2
tcp        0      0 coolshell.cn:80        110.194.134.189:1032        ESTABLISHED
tcp        0      0 coolshell.cn:80        123.169.124.111:49809       ESTABLISHED
tcp        0      0 coolshell.cn:80        116.234.127.77:11502        FIN_WAIT2
tcp        0      0 coolshell.cn:80        123.169.124.111:49829       ESTABLISHED
tcp        0      0 coolshell.cn:80        183.60.215.36:36970         TIME_WAIT
tcp        0   4166 coolshell.cn:80        61.148.242.38:30901         ESTABLISHED
tcp        0      1 coolshell.cn:80        124.152.181.209:26825       FIN_WAIT1
tcp        0      0 coolshell.cn:80        110.194.134.189:4796        ESTABLISHED
tcp        0      0 coolshell.cn:80        183.60.212.163:51082        TIME_WAIT
tcp        0      1 coolshell.cn:80        208.115.113.92:50601        LAST_ACK
tcp        0      0 coolshell.cn:80        123.169.124.111:49840       ESTABLISHED
tcp        0      0 coolshell.cn:80        117.136.20.85:50025         FIN_WAIT2
tcp        0      0 :::22                  :::<span class="k">*</span>                        LISTEN
</code></pre></div></div> <p>ä¸‹é¢æ˜¯æœ€ç®€å•æœ€å¸¸ç”¨çš„awkç¤ºä¾‹ï¼Œå…¶è¾“å‡ºç¬¬1åˆ—å’Œç¬¬4ä¾‹ï¼Œ</p> <ul> <li>å…¶ä¸­å•å¼•å·ä¸­çš„è¢«å¤§æ‹¬å·æ‹¬ç€çš„å°±æ˜¯awkçš„è¯­å¥ï¼Œæ³¨æ„ï¼Œå…¶åªèƒ½è¢«å•å¼•å·åŒ…å«ã€‚</li> <li>å…¶ä¸­çš„$1..$nè¡¨ç¤ºç¬¬å‡ ä¾‹ã€‚æ³¨ï¼š$0è¡¨ç¤ºæ•´ä¸ªè¡Œã€‚</li> </ul> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span> <span class="s1">'{print $1, $4}'</span> netstat.txt
Proto Local-Address
tcp 0.0.0.0:3306
tcp 0.0.0.0:80
tcp 127.0.0.1:9000
tcp coolshell.cn:80
tcp coolshell.cn:80
tcp coolshell.cn:80
tcp coolshell.cn:80
tcp coolshell.cn:80
tcp coolshell.cn:80
tcp coolshell.cn:80
tcp coolshell.cn:80
tcp coolshell.cn:80
tcp coolshell.cn:80
tcp coolshell.cn:80
tcp coolshell.cn:80
tcp coolshell.cn:80
tcp coolshell.cn:80
tcp :::22
</code></pre></div></div> <p>æˆ‘ä»¬å†æ¥çœ‹çœ‹awkçš„æ ¼å¼åŒ–è¾“å‡ºï¼Œå’ŒCè¯­è¨€çš„printfæ²¡ä»€ä¹ˆä¸¤æ ·ï¼š</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span> <span class="s1">'{printf "%-8s %-8s %-8s %-18s %-22s %-15s\n",$1,$2,$3,$4,$5,$6}'</span> netstat.txt
Proto    Recv-Q   Send-Q   Local-Address      Foreign-Address        State
tcp      0        0        0.0.0.0:3306       0.0.0.0:<span class="k">*</span>              LISTEN
tcp      0        0        0.0.0.0:80         0.0.0.0:<span class="k">*</span>              LISTEN
tcp      0        0        127.0.0.1:9000     0.0.0.0:<span class="k">*</span>              LISTEN
tcp      0        0        coolshell.cn:80    124.205.5.146:18245    TIME_WAIT
tcp      0        0        coolshell.cn:80    61.140.101.185:37538   FIN_WAIT2
tcp      0        0        coolshell.cn:80    110.194.134.189:1032   ESTABLISHED
tcp      0        0        coolshell.cn:80    123.169.124.111:49809  ESTABLISHED
tcp      0        0        coolshell.cn:80    116.234.127.77:11502   FIN_WAIT2
tcp      0        0        coolshell.cn:80    123.169.124.111:49829  ESTABLISHED
tcp      0        0        coolshell.cn:80    183.60.215.36:36970    TIME_WAIT
tcp      0        4166     coolshell.cn:80    61.148.242.38:30901    ESTABLISHED
tcp      0        1        coolshell.cn:80    124.152.181.209:26825  FIN_WAIT1
tcp      0        0        coolshell.cn:80    110.194.134.189:4796   ESTABLISHED
tcp      0        0        coolshell.cn:80    183.60.212.163:51082   TIME_WAIT
tcp      0        1        coolshell.cn:80    208.115.113.92:50601   LAST_ACK
tcp      0        0        coolshell.cn:80    123.169.124.111:49840  ESTABLISHED
tcp      0        0        coolshell.cn:80    117.136.20.85:50025    FIN_WAIT2
tcp      0        0        :::22              :::<span class="k">*</span>                   LISTEN
</code></pre></div></div> <h2 id="è„±æ‰å¤–å¥—">è„±æ‰å¤–å¥—</h2> <h3 id="è¿‡æ»¤è®°å½•">è¿‡æ»¤è®°å½•</h3> <p>æˆ‘ä»¬å†æ¥çœ‹çœ‹å¦‚ä½•è¿‡æ»¤è®°å½•ï¼ˆä¸‹é¢è¿‡æ»¤æ¡ä»¶ä¸ºï¼šç¬¬ä¸‰åˆ—çš„å€¼ä¸º0 &amp;&amp; ç¬¬6åˆ—çš„å€¼ä¸ºLISTENï¼‰</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span> <span class="s1">'$3==0 &amp;&amp; $6=="LISTEN" '</span> netstat.txt
tcp        0      0 0.0.0.0:3306               0.0.0.0:<span class="k">*</span>              LISTEN
tcp        0      0 0.0.0.0:80                 0.0.0.0:<span class="k">*</span>              LISTEN
tcp        0      0 127.0.0.1:9000             0.0.0.0:<span class="k">*</span>              LISTEN
tcp        0      0 :::22                      :::<span class="k">*</span>                   LISTEN
</code></pre></div></div> <p>å…¶ä¸­çš„â€œ==â€ä¸ºæ¯”è¾ƒè¿ç®—ç¬¦ã€‚å…¶ä»–æ¯”è¾ƒè¿ç®—ç¬¦ï¼š!=, &gt;, &lt;, &gt;=, &lt;=</p> <p>æˆ‘ä»¬æ¥çœ‹çœ‹å„ç§è¿‡æ»¤è®°å½•çš„æ–¹å¼ï¼š</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span> <span class="s1">' $3&gt;0 {print $0}'</span> netstat.txt
Proto Recv-Q Send-Q Local-Address          Foreign-Address             State
tcp        0   4166 coolshell.cn:80        61.148.242.38:30901         ESTABLISHED
tcp        0      1 coolshell.cn:80        124.152.181.209:26825       FIN_WAIT1
tcp        0      1 coolshell.cn:80        208.115.113.92:50601        LAST_ACK
</code></pre></div></div> <p>å¦‚æœæˆ‘ä»¬éœ€è¦è¡¨å¤´çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥å†…å»ºå˜é‡NRï¼š</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span> <span class="s1">'$3==0 &amp;&amp; $6=="LISTEN" || NR==1 '</span> netstat.txt
Proto Recv-Q Send-Q Local-Address          Foreign-Address             State
tcp        0      0 0.0.0.0:3306           0.0.0.0:<span class="k">*</span>                   LISTEN
tcp        0      0 0.0.0.0:80             0.0.0.0:<span class="k">*</span>                   LISTEN
tcp        0      0 127.0.0.1:9000         0.0.0.0:<span class="k">*</span>                   LISTEN
tcp        0      0 :::22                  :::<span class="k">*</span>                        LISTEN
</code></pre></div></div> <p>å†åŠ ä¸Šæ ¼å¼åŒ–è¾“å‡ºï¼š</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span> <span class="s1">'$3==0 &amp;&amp; $6=="LISTEN" || NR==1 {printf "%-20s %-20s %s\n",$4,$5,$6}'</span> netstat.txt
Local-Address        Foreign-Address      State
0.0.0.0:3306         0.0.0.0:<span class="k">*</span>            LISTEN
0.0.0.0:80           0.0.0.0:<span class="k">*</span>            LISTEN
127.0.0.1:9000       0.0.0.0:<span class="k">*</span>            LISTEN
:::22                :::<span class="k">*</span>                 LISTEN
</code></pre></div></div> <h3 id="å†…å»ºå˜é‡"><strong>å†…å»ºå˜é‡</strong></h3> <p>è¯´åˆ°äº†å†…å»ºå˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥æ¥çœ‹çœ‹awkçš„ä¸€äº›å†…å»ºå˜é‡ï¼š</p> <table> <tbody> <tr> <td>$0</td> <td>å½“å‰è®°å½•ï¼ˆè¿™ä¸ªå˜é‡ä¸­å­˜æ”¾ç€æ•´ä¸ªè¡Œçš„å†…å®¹ï¼‰</td> </tr> <tr> <td>$1~$n</td> <td>å½“å‰è®°å½•çš„ç¬¬nä¸ªå­—æ®µï¼Œå­—æ®µé—´ç”±FSåˆ†éš”</td> </tr> <tr> <td>FS</td> <td>è¾“å…¥å­—æ®µåˆ†éš”ç¬¦ é»˜è®¤æ˜¯ç©ºæ ¼æˆ–Tab</td> </tr> <tr> <td>NF</td> <td>å½“å‰è®°å½•ä¸­çš„å­—æ®µä¸ªæ•°ï¼Œå°±æ˜¯æœ‰å¤šå°‘åˆ—</td> </tr> <tr> <td>NR</td> <td>å·²ç»è¯»å‡ºçš„è®°å½•æ•°ï¼Œå°±æ˜¯è¡Œå·ï¼Œä»1å¼€å§‹ï¼Œå¦‚æœæœ‰å¤šä¸ªæ–‡ä»¶è¯ï¼Œè¿™ä¸ªå€¼ä¹Ÿæ˜¯ä¸æ–­ç´¯åŠ ä¸­ã€‚</td> </tr> <tr> <td>FNR</td> <td>å½“å‰è®°å½•æ•°ï¼Œä¸NRä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªå€¼ä¼šæ˜¯å„ä¸ªæ–‡ä»¶è‡ªå·±çš„è¡Œå·</td> </tr> <tr> <td>RS</td> <td>è¾“å…¥çš„è®°å½•åˆ†éš”ç¬¦ï¼Œ é»˜è®¤ä¸ºæ¢è¡Œç¬¦</td> </tr> <tr> <td>OFS</td> <td>è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦ï¼Œ é»˜è®¤ä¹Ÿæ˜¯ç©ºæ ¼</td> </tr> <tr> <td>ORS</td> <td>è¾“å‡ºçš„è®°å½•åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºæ¢è¡Œç¬¦</td> </tr> <tr> <td>FILENAME</td> <td>å½“å‰è¾“å…¥æ–‡ä»¶çš„åå­—</td> </tr> </tbody> </table> <p>æ€ä¹ˆä½¿ç”¨å‘¢ï¼Œæ¯”å¦‚ï¼šæˆ‘ä»¬å¦‚æœè¦è¾“å‡ºè¡Œå·ï¼š</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span> <span class="s1">'$3==0 &amp;&amp; $6=="ESTABLISHED" || NR==1 {printf "%02s %s %-20s %-20s %s\n",NR, FNR, $4,$5,$6}'</span> netstat.txt
01 1 Local-Address        Foreign-Address      State
07 7 coolshell.cn:80      110.194.134.189:1032 ESTABLISHED
08 8 coolshell.cn:80      123.169.124.111:49809 ESTABLISHED
10 10 coolshell.cn:80      123.169.124.111:49829 ESTABLISHED
14 14 coolshell.cn:80      110.194.134.189:4796 ESTABLISHED
17 17 coolshell.cn:80      123.169.124.111:49840 ESTABLISHED
</code></pre></div></div> <h3 id="æŒ‡å®šåˆ†éš”ç¬¦"><strong>æŒ‡å®šåˆ†éš”ç¬¦</strong></h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span> <span class="nb">awk</span>  <span class="s1">'BEGIN{FS=":"} {print $1,$3,$6}'</span> /etc/passwd
root 0 /root
bin 1 /bin
daemon 2 /sbin
adm 3 /var/adm
lp 4 /var/spool/lpd
<span class="nb">sync </span>5 /sbin
shutdown 6 /sbin
halt 7 /sbin
</code></pre></div></div> <p>ä¸Šé¢çš„å‘½ä»¤ä¹Ÿç­‰ä»·äºï¼šï¼ˆ-Fçš„æ„æ€å°±æ˜¯æŒ‡å®šåˆ†éš”ç¬¦ï¼‰</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span>  <span class="nt">-F</span>: <span class="s1">'{print $1,$3,$6}'</span> /etc/passwd
</code></pre></div></div> <p>æ³¨ï¼šå¦‚æœä½ è¦æŒ‡å®šå¤šä¸ªåˆ†éš”ç¬¦ï¼Œä½ å¯ä»¥è¿™æ ·æ¥ï¼š</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="nt">-F</span> <span class="s1">'[;:]'</span>
</code></pre></div></div> <p>å†æ¥çœ‹ä¸€ä¸ªä»¥\tä½œä¸ºåˆ†éš”ç¬¦è¾“å‡ºçš„ä¾‹å­ï¼ˆä¸‹é¢ä½¿ç”¨äº†/etc/passwdæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯ä»¥:åˆ†éš”çš„ï¼‰ï¼š</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span>  <span class="nt">-F</span>: <span class="s1">'{print $1,$3,$6}'</span> <span class="nv">OFS</span><span class="o">=</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span> /etc/passwd
root    0       /root
bin     1       /bin
daemon  2       /sbin
adm     3       /var/adm
lp      4       /var/spool/lpd
<span class="nb">sync    </span>5       /sbin
</code></pre></div></div> <h2 id="è„±æ‰è¡¬è¡«">è„±æ‰è¡¬è¡«</h2> <h3 id="å­—ç¬¦ä¸²åŒ¹é…">å­—ç¬¦ä¸²åŒ¹é…</h3> <p>æˆ‘ä»¬å†æ¥çœ‹å‡ ä¸ªå­—ç¬¦ä¸²åŒ¹é…çš„ç¤ºä¾‹ï¼š</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span> <span class="s1">'$6 ~ /FIN/ || NR==1 {print NR,$4,$5,$6}'</span> <span class="nv">OFS</span><span class="o">=</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span> netstat.txt
1       Local-Address   Foreign-Address State
6       coolshell.cn:80 61.140.101.185:37538    FIN_WAIT2
9       coolshell.cn:80 116.234.127.77:11502    FIN_WAIT2
13      coolshell.cn:80 124.152.181.209:26825   FIN_WAIT1
18      coolshell.cn:80 117.136.20.85:50025     FIN_WAIT2
 
<span class="nv">$ $ </span><span class="nb">awk</span> <span class="s1">'$6 ~ /WAIT/ || NR==1 {print NR,$4,$5,$6}'</span> <span class="nv">OFS</span><span class="o">=</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span> netstat.txt
1       Local-Address   Foreign-Address State
5       coolshell.cn:80 124.205.5.146:18245     TIME_WAIT
6       coolshell.cn:80 61.140.101.185:37538    FIN_WAIT2
9       coolshell.cn:80 116.234.127.77:11502    FIN_WAIT2
11      coolshell.cn:80 183.60.215.36:36970     TIME_WAIT
13      coolshell.cn:80 124.152.181.209:26825   FIN_WAIT1
15      coolshell.cn:80 183.60.212.163:51082    TIME_WAIT
18      coolshell.cn:80 117.136.20.85:50025     FIN_WAIT2
</code></pre></div></div> <p>ä¸Šé¢çš„ç¬¬ä¸€ä¸ªç¤ºä¾‹åŒ¹é…FINçŠ¶æ€ï¼Œ ç¬¬äºŒä¸ªç¤ºä¾‹åŒ¹é…WAITå­—æ ·çš„çŠ¶æ€ã€‚å…¶å® ~ è¡¨ç¤ºæ¨¡å¼å¼€å§‹ã€‚/ /ä¸­æ˜¯æ¨¡å¼ã€‚è¿™å°±æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ã€‚</p> <p>å…¶å®awkå¯ä»¥åƒgrepä¸€æ ·çš„å»åŒ¹é…ç¬¬ä¸€è¡Œï¼Œå°±åƒè¿™æ ·ï¼š</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span> <span class="s1">'/LISTEN/'</span> netstat.txt
tcp        0      0 0.0.0.0:3306            0.0.0.0:<span class="k">*</span>               LISTEN
tcp        0      0 0.0.0.0:80              0.0.0.0:<span class="k">*</span>               LISTEN
tcp        0      0 127.0.0.1:9000          0.0.0.0:<span class="k">*</span>               LISTEN
tcp        0      0 :::22                   :::<span class="k">*</span>                    LISTEN
</code></pre></div></div> <table> <tbody> <tr> <td>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ â€œ/FIN</td> <td>TIME/â€ æ¥åŒ¹é… FIN æˆ–è€… TIME :</td> </tr> </tbody> </table> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span> <span class="s1">'$6 ~ /FIN|TIME/ || NR==1 {print NR,$4,$5,$6}'</span> <span class="nv">OFS</span><span class="o">=</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span> netstat.txt
1       Local-Address   Foreign-Address State
5       coolshell.cn:80 124.205.5.146:18245     TIME_WAIT
6       coolshell.cn:80 61.140.101.185:37538    FIN_WAIT2
9       coolshell.cn:80 116.234.127.77:11502    FIN_WAIT2
11      coolshell.cn:80 183.60.215.36:36970     TIME_WAIT
13      coolshell.cn:80 124.152.181.209:26825   FIN_WAIT1
15      coolshell.cn:80 183.60.212.163:51082    TIME_WAIT
18      coolshell.cn:80 117.136.20.85:50025     FIN_WAIT2
</code></pre></div></div> <p>å†æ¥çœ‹çœ‹æ¨¡å¼å–åçš„ä¾‹å­ï¼š</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span> <span class="s1">'$6 !~ /WAIT/ || NR==1 {print NR,$4,$5,$6}'</span> <span class="nv">OFS</span><span class="o">=</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span> netstat.txt
1       Local-Address   Foreign-Address State
2       0.0.0.0:3306    0.0.0.0:<span class="k">*</span>       LISTEN
3       0.0.0.0:80      0.0.0.0:<span class="k">*</span>       LISTEN
4       127.0.0.1:9000  0.0.0.0:<span class="k">*</span>       LISTEN
7       coolshell.cn:80 110.194.134.189:1032    ESTABLISHED
8       coolshell.cn:80 123.169.124.111:49809   ESTABLISHED
10      coolshell.cn:80 123.169.124.111:49829   ESTABLISHED
12      coolshell.cn:80 61.148.242.38:30901     ESTABLISHED
14      coolshell.cn:80 110.194.134.189:4796    ESTABLISHED
16      coolshell.cn:80 208.115.113.92:50601    LAST_ACK
17      coolshell.cn:80 123.169.124.111:49840   ESTABLISHED
19      :::22   :::<span class="k">*</span>    LISTEN
</code></pre></div></div> <p>æˆ–æ˜¯ï¼š</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">'!/WAIT/'</span> netstat.txt
</code></pre></div></div> <p><strong>æŠ˜åˆ†æ–‡ä»¶</strong></p> <p>awkæ‹†åˆ†æ–‡ä»¶å¾ˆç®€å•ï¼Œä½¿ç”¨é‡å®šå‘å°±å¥½äº†ã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œæ˜¯æŒ‰ç¬¬6ä¾‹åˆ†éš”æ–‡ä»¶ï¼Œç›¸å½“çš„ç®€å•ï¼ˆå…¶ä¸­çš„NR!=1è¡¨ç¤ºä¸å¤„ç†è¡¨å¤´ï¼‰ã€‚</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span> <span class="s1">'NR!=1{print &gt; $6}'</span> netstat.txt
 
<span class="nv">$ </span><span class="nb">ls
</span>ESTABLISHED  FIN_WAIT1  FIN_WAIT2  LAST_ACK  LISTEN  netstat.txt  TIME_WAIT
 
<span class="nv">$ </span><span class="nb">cat </span>ESTABLISHED
tcp        0      0 coolshell.cn:80        110.194.134.189:1032        ESTABLISHED
tcp        0      0 coolshell.cn:80        123.169.124.111:49809       ESTABLISHED
tcp        0      0 coolshell.cn:80        123.169.124.111:49829       ESTABLISHED
tcp        0   4166 coolshell.cn:80        61.148.242.38:30901         ESTABLISHED
tcp        0      0 coolshell.cn:80        110.194.134.189:4796        ESTABLISHED
tcp        0      0 coolshell.cn:80        123.169.124.111:49840       ESTABLISHED
 
<span class="nv">$ </span><span class="nb">cat </span>FIN_WAIT1
tcp        0      1 coolshell.cn:80        124.152.181.209:26825       FIN_WAIT1
 
<span class="nv">$ </span><span class="nb">cat </span>FIN_WAIT2
tcp        0      0 coolshell.cn:80        61.140.101.185:37538        FIN_WAIT2
tcp        0      0 coolshell.cn:80        116.234.127.77:11502        FIN_WAIT2
tcp        0      0 coolshell.cn:80        117.136.20.85:50025         FIN_WAIT2
 
<span class="nv">$ </span><span class="nb">cat </span>LAST_ACK
tcp        0      1 coolshell.cn:80        208.115.113.92:50601        LAST_ACK
 
<span class="nv">$ </span><span class="nb">cat </span>LISTEN
tcp        0      0 0.0.0.0:3306           0.0.0.0:<span class="k">*</span>                   LISTEN
tcp        0      0 0.0.0.0:80             0.0.0.0:<span class="k">*</span>                   LISTEN
tcp        0      0 127.0.0.1:9000         0.0.0.0:<span class="k">*</span>                   LISTEN
tcp        0      0 :::22                  :::<span class="k">*</span>                        LISTEN
 
<span class="nv">$ </span><span class="nb">cat </span>TIME_WAIT
tcp        0      0 coolshell.cn:80        124.205.5.146:18245         TIME_WAIT
tcp        0      0 coolshell.cn:80        183.60.215.36:36970         TIME_WAIT
tcp        0      0 coolshell.cn:80        183.60.212.163:51082        TIME_WAIT
</code></pre></div></div> <p>ä½ ä¹Ÿå¯ä»¥æŠŠæŒ‡å®šçš„åˆ—è¾“å‡ºåˆ°æ–‡ä»¶ï¼š</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="s1">'NR!=1{print $4,$5 &gt; $6}'</span> netstat.txt
</code></pre></div></div> <p>å†å¤æ‚ä¸€ç‚¹ï¼šï¼ˆæ³¨æ„å…¶ä¸­çš„if-else-ifè¯­å¥ï¼Œå¯è§awkå…¶å®æ˜¯ä¸ªè„šæœ¬è§£é‡Šå™¨ï¼‰</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span> <span class="s1">'NR!=1{if($6 ~ /TIME|ESTABLISHED/) print &gt; "1.txt";
else if($6 ~ /LISTEN/) print &gt; "2.txt";
else print &gt; "3.txt" }'</span> netstat.txt
 
<span class="nv">$ </span><span class="nb">ls</span> ?.txt
1.txt  2.txt  3.txt
 
<span class="nv">$ </span><span class="nb">cat </span>1.txt
tcp        0      0 coolshell.cn:80        124.205.5.146:18245         TIME_WAIT
tcp        0      0 coolshell.cn:80        110.194.134.189:1032        ESTABLISHED
tcp        0      0 coolshell.cn:80        123.169.124.111:49809       ESTABLISHED
tcp        0      0 coolshell.cn:80        123.169.124.111:49829       ESTABLISHED
tcp        0      0 coolshell.cn:80        183.60.215.36:36970         TIME_WAIT
tcp        0   4166 coolshell.cn:80        61.148.242.38:30901         ESTABLISHED
tcp        0      0 coolshell.cn:80        110.194.134.189:4796        ESTABLISHED
tcp        0      0 coolshell.cn:80        183.60.212.163:51082        TIME_WAIT
tcp        0      0 coolshell.cn:80        123.169.124.111:49840       ESTABLISHED
 
<span class="nv">$ </span><span class="nb">cat </span>2.txt
tcp        0      0 0.0.0.0:3306           0.0.0.0:<span class="k">*</span>                   LISTEN
tcp        0      0 0.0.0.0:80             0.0.0.0:<span class="k">*</span>                   LISTEN
tcp        0      0 127.0.0.1:9000         0.0.0.0:<span class="k">*</span>                   LISTEN
tcp        0      0 :::22                  :::<span class="k">*</span>                        LISTEN
 
<span class="nv">$ </span><span class="nb">cat </span>3.txt
tcp        0      0 coolshell.cn:80        61.140.101.185:37538        FIN_WAIT2
tcp        0      0 coolshell.cn:80        116.234.127.77:11502        FIN_WAIT2
tcp        0      1 coolshell.cn:80        124.152.181.209:26825       FIN_WAIT1
tcp        0      1 coolshell.cn:80        208.115.113.92:50601        LAST_ACK
tcp        0      0 coolshell.cn:80        117.136.20.85:50025         FIN_WAIT2
</code></pre></div></div> <h3 id="ç»Ÿè®¡">ç»Ÿè®¡</h3> <p>ä¸‹é¢çš„å‘½ä»¤è®¡ç®—æ‰€æœ‰çš„Cæ–‡ä»¶ï¼ŒCPPæ–‡ä»¶å’ŒHæ–‡ä»¶çš„æ–‡ä»¶å¤§å°æ€»å’Œã€‚</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span>  <span class="k">*</span>.cpp <span class="k">*</span>.c <span class="k">*</span>.h | <span class="nb">awk</span> <span class="s1">'{sum+=$5} END {print sum}'</span>
2511401
</code></pre></div></div> <p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªç»Ÿè®¡å„ä¸ªconnectionçŠ¶æ€çš„ç”¨æ³•ï¼šï¼ˆæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€äº›ç¼–ç¨‹çš„å½±å­äº†ï¼Œå¤§å®¶éƒ½æ˜¯ç¨‹åºå‘˜æˆ‘å°±ä¸è§£é‡Šäº†ã€‚æ³¨æ„å…¶ä¸­çš„æ•°ç»„çš„ç”¨æ³•ï¼‰</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span> <span class="s1">'NR!=1{a[$6]++;} END {for (i in a) print i ", " a[i];}'</span> netstat.txt
TIME_WAIT, 3
FIN_WAIT1, 1
ESTABLISHED, 6
FIN_WAIT2, 3
LAST_ACK, 1
LISTEN, 4
</code></pre></div></div> <p>å†æ¥çœ‹çœ‹ç»Ÿè®¡æ¯ä¸ªç”¨æˆ·çš„è¿›ç¨‹çš„å äº†å¤šå°‘å†…å­˜ï¼ˆæ³¨ï¼šsumçš„RSSé‚£ä¸€åˆ—ï¼‰</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ps aux | <span class="nb">awk</span> <span class="s1">'NR!=1{a[$1]+=$6;} END { for(i in a) print i ", " a[i]"KB";}'</span>
dbus, 540KB
mysql, 99928KB
www, 3264924KB
root, 63644KB
hchen, 6020KB
</code></pre></div></div> <h2 id="è„±æ‰å†…è¡£">è„±æ‰å†…è¡£</h2> <h3 id="awkè„šæœ¬">awkè„šæœ¬</h3> <p>åœ¨ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªENDå…³é”®å­—ã€‚ENDçš„æ„æ€æ˜¯â€œå¤„ç†å®Œæ‰€æœ‰çš„è¡Œçš„æ ‡è¯†â€ï¼Œå³ç„¶è¯´åˆ°äº†ENDå°±æœ‰å¿…è¦ä»‹ç»ä¸€ä¸‹BEGINï¼Œè¿™ä¸¤ä¸ªå…³é”®å­—æ„å‘³ç€æ‰§è¡Œå‰å’Œæ‰§è¡Œåçš„æ„æ€ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p> <ul> <li>BEGIN{ è¿™é‡Œé¢æ”¾çš„æ˜¯æ‰§è¡Œå‰çš„è¯­å¥ }</li> <li>END {è¿™é‡Œé¢æ”¾çš„æ˜¯å¤„ç†å®Œæ‰€æœ‰çš„è¡Œåè¦æ‰§è¡Œçš„è¯­å¥ }</li> <li>{è¿™é‡Œé¢æ”¾çš„æ˜¯å¤„ç†æ¯ä¸€è¡Œæ—¶è¦æ‰§è¡Œçš„è¯­å¥}</li> </ul> <p>ä¸ºäº†è¯´æ¸…æ¥šè¿™ä¸ªäº‹ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢çš„ç¤ºä¾‹ï¼š</p> <p>å‡è®¾æœ‰è¿™ä¹ˆä¸€ä¸ªæ–‡ä»¶ï¼ˆå­¦ç”Ÿæˆç»©è¡¨ï¼‰ï¼š</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat </span>score.txt
Marry   2143 78 84 77
Jack    2321 66 78 45
Tom     2122 48 77 71
Mike    2537 87 97 95
Bob     2415 40 57 62
</code></pre></div></div> <p>æˆ‘ä»¬çš„awkè„šæœ¬å¦‚ä¸‹ï¼ˆæˆ‘æ²¡æœ‰å†™æœ‰å‘½ä»¤è¡Œä¸Šæ˜¯å› ä¸ºå‘½ä»¤è¡Œä¸Šä¸æ˜“è¯»ï¼Œå¦å¤–ä¹Ÿåœ¨ä»‹ç»å¦ä¸€ç§ç”¨æ³•ï¼‰ï¼š</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat </span>cal.awk
<span class="c">#!/bin/awk -f</span>
<span class="c">#è¿è¡Œå‰</span>
BEGIN <span class="o">{</span>
    math <span class="o">=</span> 0
    english <span class="o">=</span> 0
    computer <span class="o">=</span> 0
 
    <span class="nb">printf</span> <span class="s2">"NAME    NO.   MATH  ENGLISH  COMPUTER   TOTAL</span><span class="se">\n</span><span class="s2">"</span>
    <span class="nb">printf</span> <span class="s2">"---------------------------------------------</span><span class="se">\n</span><span class="s2">"</span>
<span class="o">}</span>
<span class="c">#è¿è¡Œä¸­</span>
<span class="o">{</span>
    math+<span class="o">=</span><span class="nv">$3</span>
    english+<span class="o">=</span><span class="nv">$4</span>
    computer+<span class="o">=</span><span class="nv">$5</span>
    <span class="nb">printf</span> <span class="s2">"%-6s %-6s %4d %8d %8d %8d</span><span class="se">\n</span><span class="s2">"</span>, <span class="nv">$1</span>, <span class="nv">$2</span>, <span class="nv">$3</span>,<span class="nv">$4</span>,<span class="nv">$5</span>, <span class="nv">$3</span>+<span class="nv">$4</span>+<span class="nv">$5</span>
<span class="o">}</span>
<span class="c">#è¿è¡Œå</span>
END <span class="o">{</span>
    <span class="nb">printf</span> <span class="s2">"---------------------------------------------</span><span class="se">\n</span><span class="s2">"</span>
    <span class="nb">printf</span> <span class="s2">"  TOTAL:%10d %8d %8d </span><span class="se">\n</span><span class="s2">"</span>, math, english, computer
    <span class="nb">printf</span> <span class="s2">"AVERAGE:%10.2f %8.2f %8.2f</span><span class="se">\n</span><span class="s2">"</span>, math/NR, english/NR, computer/NR
<span class="o">}</span>
</code></pre></div></div> <p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ‰§è¡Œç»“æœï¼šï¼ˆä¹Ÿå¯ä»¥è¿™æ ·è¿è¡Œ ./cal.awk score.txtï¼‰</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span> <span class="nt">-f</span> cal.awk score.txt
NAME    NO.   MATH  ENGLISH  COMPUTER   TOTAL
<span class="nt">---------------------------------------------</span>
Marry  2143     78       84       77      239
Jack   2321     66       78       45      189
Tom    2122     48       77       71      196
Mike   2537     87       97       95      279
Bob    2415     40       57       62      159
<span class="nt">---------------------------------------------</span>
  TOTAL:       319      393      350
AVERAGE:     63.80    78.60    70.00
</code></pre></div></div> <h3 id="ç¯å¢ƒå˜é‡">ç¯å¢ƒå˜é‡</h3> <p>å³ç„¶è¯´åˆ°äº†è„šæœ¬ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ€ä¹ˆå’Œç¯å¢ƒå˜é‡äº¤äº’ï¼šï¼ˆä½¿ç”¨-vå‚æ•°å’ŒENVIRONï¼Œä½¿ç”¨ENVIRONçš„ç¯å¢ƒå˜é‡éœ€è¦exportï¼‰</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ x</span><span class="o">=</span>5
 
<span class="nv">$ y</span><span class="o">=</span>10
<span class="nv">$ </span><span class="nb">export </span>y
 
<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$x</span> <span class="nv">$y</span>
5 10
 
<span class="nv">$ </span><span class="nb">awk</span> <span class="nt">-v</span> <span class="nv">val</span><span class="o">=</span><span class="nv">$x</span> <span class="s1">'{print $1, $2, $3, $4+val, $5+ENVIRON["y"]}'</span> <span class="nv">OFS</span><span class="o">=</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span> score.txt
Marry   2143    78      89      87
Jack    2321    66      83      55
Tom     2122    48      82      81
Mike    2537    87      102     105
Bob     2415    40      62      72
</code></pre></div></div> <h2 id="å‡ ä¸ªèŠ±æ´»">å‡ ä¸ªèŠ±æ´»</h2> <p>æœ€åï¼Œæˆ‘ä»¬å†æ¥çœ‹å‡ ä¸ªå°ä¾‹å­ï¼š</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#ä»fileæ–‡ä»¶ä¸­æ‰¾å‡ºé•¿åº¦å¤§äº80çš„è¡Œ</span>
<span class="nb">awk</span> <span class="s1">'length&gt;80'</span> file
 
<span class="c">#æŒ‰è¿æ¥æ•°æŸ¥çœ‹å®¢æˆ·ç«¯IP</span>
netstat <span class="nt">-ntu</span> | <span class="nb">awk</span> <span class="s1">'{print $5}'</span> | <span class="nb">cut</span> <span class="nt">-d</span>: <span class="nt">-f1</span> | <span class="nb">sort</span> | <span class="nb">uniq</span> <span class="nt">-c</span> | <span class="nb">sort</span> <span class="nt">-nr</span>
 
<span class="c">#æ‰“å°99ä¹˜æ³•è¡¨</span>
<span class="nb">seq </span>9 | <span class="nb">sed</span> <span class="s1">'H;g'</span> | <span class="nb">awk</span> <span class="nt">-v</span> <span class="nv">RS</span><span class="o">=</span><span class="s1">''</span> <span class="s1">'{for(i=1;i&lt;=NF;i++)printf("%dx%d=%d%s", i, NR, i*NR, i==NR?"\n":"\t")}'</span>

</code></pre></div></div> <h2 id="è‡ªå·±æ’¸å§">è‡ªå·±æ’¸å§</h2> <p>å…³äºå…¶ä¸­çš„ä¸€äº›çŸ¥è¯†ç‚¹å¯ä»¥å‚çœ‹<a href="http://www.gnu.org/software/gawk/manual/gawk.html">gawkçš„æ‰‹å†Œ</a>ï¼š</p> <ul> <li>å†…å»ºå˜é‡ï¼Œå‚çœ‹ï¼š<a href="http://www.gnu.org/software/gawk/manual/gawk.html#Built_002din-Variables">http://www.gnu.org/software/gawk/manual/gawk.html#Built_002din-Variables</a></li> <li>æµæ§æ–¹é¢ï¼Œå‚çœ‹ï¼š<a href="http://www.gnu.org/software/gawk/manual/gawk.html#Statements">http://www.gnu.org/software/gawk/manual/gawk.html#Statements</a></li> <li>å†…å»ºå‡½æ•°ï¼Œå‚çœ‹ï¼š<a href="http://www.gnu.org/software/gawk/manual/gawk.html#Built_002din">http://www.gnu.org/software/gawk/manual/gawk.html#Built_002din</a></li> <li>æ­£åˆ™è¡¨è¾¾å¼ï¼Œå‚çœ‹ï¼š<a href="http://www.gnu.org/software/gawk/manual/gawk.html#Regexp">http://www.gnu.org/software/gawk/manual/gawk.html#Regexp</a></li> </ul> <p>ï¼ˆå…¨æ–‡å®Œï¼‰</p> <div class="date-highlight"> <!--1--> <a class="tag" href="/tag/awk">awk</a> </div> </div> </div> <script src="/js/canvas.js"></script> <script> (function() { var img = new Image(); function getResult(event) { var imgType = "png"; (event && event.type === 'load' ? img.width == 1 : false) && (imgType = "webp"); $(".block-left").css("background-image", "linear-gradient(rgba(44, 45, 51, 0.8), rgba(44, 45, 51, 0.8)), url(/images/background.png)".replace(/\.png/,"." + imgType)); } img.onerror = getResult; img.onload = getResult; img.src = 'data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA='; })(); </script> </body> </html>
