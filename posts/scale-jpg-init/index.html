<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> <title id="site-title">å‘ä¸€ä¸ªå°å·¥å…·-Scale JPG | c0ldcat's blog</title> <link rel="icon" href="/c0ldcat.png"> <link rel="stylesheet" type="text/css" href="/css/main.css"> <link rel="alternate" type="application/rss+xml" title="RSS Feed for c0ldcat's blog" href="/feed.xml" /> <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script> <script type="text/javascript" src="/js/jquery.typetype.min.js"></script> <script> var _hmt = _hmt || []; (function () { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?e1acee033923881f5528a3b4a658039b"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script> <style> .block-left { background-size: cover; background-position-x: right; } </style> <!-- Begin Jekyll SEO tag v2.4.0 --> <title>å‘ä¸€ä¸ªå°å·¥å…·-Scale JPG | c0ldcatâ€™s blog</title> <meta name="generator" content="Jekyll v3.7.3" /> <meta property="og:title" content="å‘ä¸€ä¸ªå°å·¥å…·-Scale JPG" /> <meta name="author" content="c0ldcat" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="å‰é¢å…¨æ˜¯åºŸè¯, ç›´æ¥è·³åˆ°æ€ä¹ˆç”¨" /> <meta property="og:description" content="å‰é¢å…¨æ˜¯åºŸè¯, ç›´æ¥è·³åˆ°æ€ä¹ˆç”¨" /> <link rel="canonical" href="//blog.c0ldcat.ml/posts/scale-jpg-init/" /> <meta property="og:url" content="//blog.c0ldcat.ml/posts/scale-jpg-init/" /> <meta property="og:site_name" content="c0ldcatâ€™s blog" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2017-04-07T22:06:28+08:00" /> <script type="application/ld+json"> {"@type":"BlogPosting","datePublished":"2017-04-07T22:06:28+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"//blog.c0ldcat.ml/posts/scale-jpg-init/"},"url":"//blog.c0ldcat.ml/posts/scale-jpg-init/","author":{"@type":"Person","name":"c0ldcat"},"description":"å‰é¢å…¨æ˜¯åºŸè¯, ç›´æ¥è·³åˆ°æ€ä¹ˆç”¨","headline":"å‘ä¸€ä¸ªå°å·¥å…·-Scale JPG","dateModified":"2017-04-07T22:06:28+08:00","@context":"http://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <div class="block-left"> <div class="content"> <div class="main-info"> <a href="/" class="logo"><img src="/images/c0ldcat-pure-white.svg" class="logo"></a> <h1> <span id="author-name">c0ldcat</span><span>&#39;s blog</span> </h1> <ul> <li><a href="/posts" class="emoji-nav">ğŸ–Šï¸</a></li> <li><a href="/projects" class="emoji-nav">ğŸˆ</a></li> <li><a href="/tags" class="emoji-nav">ğŸ”–</a></li> <li><a href="/love" class="emoji-nav">â¤ï¸</a></li> </ul> </div> </div> <canvas></canvas> </div> <div id="pages" class="block-right"> <div class="inner-post content"> <h1>å‘ä¸€ä¸ªå°å·¥å…·-Scale JPG</h1> <div class="date-highlight">07 Apr 2017</div> <p>å‰é¢å…¨æ˜¯åºŸè¯, ç›´æ¥è·³åˆ°<a href="#æ€ä¹ˆç”¨">æ€ä¹ˆç”¨</a></p> <p>å‰å‡ å¤©åœ¨æŠ¥è‡ªæ‹›, ç…§ç‰‡ææ–™æ–‡ä»¶é™åˆ¶çœŸçš„éå¸¸éº»çƒ¦å•Šâ€¦</p> <p>äºæ˜¯æˆ‘éšæ‰‹å†™äº†ä¸€ä¸²è„šæœ¬:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/sh</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-d</span> out_small_data <span class="o">]</span><span class="p">;</span><span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"out_small_data dir existed."</span>
    <span class="nb">read</span> <span class="nt">-n</span> 1 <span class="nt">-p</span> <span class="s2">"remove it?[y/N]"</span> answer
    <span class="nb">echo
    </span><span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$answer</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"y"</span> <span class="o">]</span><span class="p">;</span><span class="k">then
        </span><span class="nb">rm</span> <span class="nt">-rf</span> out_small_data
    <span class="k">else
        </span><span class="nb">exit
    </span><span class="k">fi
fi

</span><span class="nb">cp </span>data out_small_data <span class="nt">-r</span>

<span class="nb">cd </span>out_small_data

<span class="nv">FILE_SIZE</span><span class="o">=</span>300k
<span class="nv">QUALITY</span><span class="o">=</span>50
<span class="nv">SIZE</span><span class="o">=</span>100

<span class="k">while</span> <span class="o">[</span> <span class="s2">"</span><span class="k">$(</span>find ./ <span class="nt">-regex</span> <span class="s1">'.*\(jpg\|JPG\|png\|jpeg\)'</span> <span class="nt">-size</span> +<span class="nv">$FILE_SIZE</span> | <span class="nb">sed</span> <span class="s2">"s/^</span><span class="se">\.\/</span><span class="s2">//"</span><span class="k">)</span><span class="s2">x"</span> <span class="o">!=</span> <span class="s2">"x"</span> <span class="o">]</span>
<span class="k">do
    for </span>f <span class="k">in</span> <span class="k">$(</span>find ./ <span class="nt">-regex</span> <span class="s1">'.*\(jpg\|JPG\|png\|jpeg\)'</span> <span class="nt">-size</span> +<span class="nv">$FILE_SIZE</span> | <span class="nb">sed</span> <span class="s2">"s/^</span><span class="se">\.\/</span><span class="s2">//"</span><span class="k">)</span>
    <span class="k">do</span>
        <span class="c">#echo "converting $f with $QUALITY% quality..."</span>
        <span class="nb">echo</span> <span class="s2">"converting </span><span class="nv">$f</span><span class="s2"> with </span><span class="nv">$SIZE</span><span class="s2">% size..."</span>
        <span class="nb">mv</span> <span class="nv">$f</span> <span class="s2">"tmp</span><span class="nv">$f</span><span class="s2">"</span>
        convert <span class="nt">-quality</span> <span class="k">${</span><span class="nv">QUALITY</span><span class="k">}</span> <span class="s2">"tmp</span><span class="nv">$f</span><span class="s2">"</span> <span class="s2">"tmp2</span><span class="nv">$f</span><span class="s2">"</span>
        convert <span class="nt">-resize</span> <span class="nv">$SIZE</span>%x<span class="nv">$SIZE</span>% <span class="s2">"tmp2</span><span class="nv">$f</span><span class="s2">"</span> <span class="nv">$f</span>
        <span class="nb">rm</span> <span class="s2">"tmp</span><span class="nv">$f</span><span class="s2">"</span> <span class="s2">"tmp2</span><span class="nv">$f</span><span class="s2">"</span>
    <span class="k">done
    </span><span class="nv">QUALITY</span><span class="o">=</span><span class="k">$((</span><span class="nv">$QUALITY</span> <span class="o">-</span> <span class="m">1</span><span class="k">))</span>
    <span class="nv">SIZE</span><span class="o">=</span><span class="k">$((</span><span class="nv">$SIZE</span> <span class="o">-</span> <span class="m">1</span><span class="k">))</span>
<span class="k">done

for </span>f <span class="k">in</span> <span class="k">$(</span>find ./ <span class="nt">-regex</span> <span class="s1">'.*\(.png\|.PNG\)$'</span> | <span class="nb">sed</span> <span class="s2">"s/^</span><span class="se">\.\/</span><span class="s2">//"</span><span class="k">)</span>
<span class="k">do
</span><span class="nb">echo</span> <span class="s2">"convert png file "</span><span class="nv">$f</span><span class="s2">" to jpg file"</span>
<span class="nb">mv</span> <span class="nv">$f</span> <span class="s2">"tmp</span><span class="nv">$f</span><span class="s2">"</span>
convert <span class="s2">"tmp</span><span class="nv">$f</span><span class="s2">"</span> <span class="k">$(</span><span class="nb">echo</span> <span class="nv">$f</span> | <span class="nb">sed</span> <span class="s1">'s/\..*$/.jpg/'</span><span class="k">)</span>
<span class="nb">rm</span> <span class="s2">"tmp</span><span class="nv">$f</span><span class="s2">"</span>
<span class="k">done

</span><span class="nb">echo</span> <span class="s2">"done"</span>
</code></pre></div></div> <p>åŸç†éå¸¸ç²—æš´o_o â€¦.</p> <p>å°±æ˜¯ä¸€æ­¥æ­¥å‡å°è´¨é‡å’Œåˆ†è¾¨ç‡ç›´åˆ°æ–‡ä»¶ç¬¦åˆå¤§å°ä¸ºæ­¢</p> <p>æ„Ÿè§‰è¿˜ä¸é”™(ã€‚ãƒ»âˆ€ãƒ»)ãƒ</p> <p>ç„¶åé™†é™†ç»­ç»­æœ‰ä¸€äº›åŒå­¦æ¥æ‰¾æˆ‘å‹ç¼©å›¾ç‰‡</p> <p>å…¶å®ä¸‹ä¸ª50M+çš„æ ¼å¼å·¥ç¨‹æ‰‹åŠ¨ä¸€æ­¥æ­¥ç¼©å°å°±èƒ½è§£å†³, ä½†éƒ½å¤ªæ‡’äº†</p> <p>ç„¶åæˆ‘ä¹Ÿæ‡’å¾—ä¸è¡Œ..è¿æ•²ä¸€è¡Œå‘½ä»¤éƒ½ä¸æƒ³</p> <p>ç„¶åæƒ³æŠŠè„šæœ¬ç»™ä»–â€¦( ï¼¿ ï¼¿)ãƒï½œ</p> <p>ä½†ä¸è¡Œå•Šæ€»ä¸èƒ½è®©åˆ«äººæ¯ä¸ªäººéƒ½å‡çº§Windows 10 Insiderå†æŒ‰ä¸ªWSLå§</p> <p>ç„¶åæˆ‘å°±æƒ³è¦ä¸å†™ä¸ªUIå§ï¼ˆï¿£ï¸¶ï¿£ï¼‰â†—ã€€</p> <p>ç„¶åä¸æƒ³å†™ä¸ªWeb APPå•Š..æ¯•ç«Ÿæ‰¾ä¸åˆ°å…è´¹çš„å›½å†…çš„æ€§èƒ½æ¯”è¾ƒå¥½çš„VPS, ç„¶åæˆ‘åˆä¸ä¼šPHPâ•¯ï¸¿â•°</p> <p>è¦ä¸å†™nativeçš„å§?</p> <p>ç„¶åæˆ‘åˆä¸ä¼šWPFâ€¦è¦ä¸ç”¨PyQT? SWING? GTK C?</p> <p>ç„¶åæˆ‘å°±æƒ³èµ·å¥½åƒè¿˜æœ‰ä¸ªJavaFXï¼ˆ*ã‚œãƒ¼ã‚œ*ï¼‰</p> <p><img src="/images/2017-04-02-scale-jpg-init/javafxisland.png" alt="" /></p> <p>ç„¶åéšæ‰‹æœäº†ä¸€ä¸‹(â—â€™â—¡â€™â—)</p> <p>çœ‹èµ·æ¥æŒºå®¹æ˜“ä¸Šæ‰‹çš„(à¸‡ â€¢_â€¢)à¸‡</p> <p>ç¡®å®ä¹ŸæŒºå®¹æ˜“ä¸Šæ‰‹çš„(ï¿£â–½ï¿£)â€</p> <p>ç„¶åä¸‰ä¸¤ä¸‹å°±å…¥äº†é—¨,</p> <p>é…åˆè¿‡ç¡¬çš„GoogleæŠ€èƒ½\(ï¿£ï¸¶ï¿£*\))</p> <p>ç„¶åScale JPGå°±å†™å¥½äº†</p> <p>çœŸçš„åªè¦å§ç…§ç‰‡æ–‡ä»¶æ‹–è¿›å»å°±å¥½äº†</p> <p>çœŸçš„éå¸¸æ–¹ä¾¿!( Â´ï½¥ï½¥)ï¾‰(._.`)</p> <p>çœŸçš„éå¸¸æ–¹ä¾¿å†™!</p> <p>MVCæ¡†æ¶éå¸¸æ¸…æ™°å¹²å‡€,(å“ªæ¥çš„Mâ€¦VCæ¡†æ¶(+_+)?</p> <p>ç„¶åç”¨Java1.8, å†ä¹Ÿä¸ç”¨ä¸€å †åŒ¿ålistener, lamdaå‡½æ•°æ¥å›åµŒå¥—â™ª(^âˆ‡^*)</p> <p>zenjavaçš„javafx-maven-pluginä¸€è¡Œå‘½ä»¤å°±æ‰“åŒ…å¥½äº†exe</p> <p>ç„¶å, ç„¶åè¿™è¾¹åˆå¥½å¤šç„¶åâ€¦ æœ€åæˆ‘æ¥è°ˆè°ˆæ€ä¹ˆç”¨</p> <h1 id="æ€ä¹ˆç”¨">æ€ä¹ˆç”¨</h1> <p>é¦–å…ˆä¸‹è½½â€¦</p> <p>è™½ç„¶æ˜¯å°å·¥å…·â€¦ä½†å› ä¸ºæ†ç»‘äº†Jre8å·¨å¤§æ— æ¯”â€¦40MB</p> <p><a href="http://pan.baidu.com/s/1eSmohhC">ç™¾åº¦ç½‘ç›˜</a></p> <p><a href="https://github.com/c0ldcat/scale-jpg/releases/download/v1.0/scale-jpg-1.0.exe">Github</a></p> <p>é¦–å…ˆçœ‹çœ‹æ¼”ç¤ºè§†é¢‘</p> <video src="/images/2017-04-02-scale-jpg-init/scale-jpg.mp4" controls="controls" preload="none"> Your browser does not support the video tag. </video> <p>ç„¶åè§£å‹</p> <p><img src="/images/2017-04-02-scale-jpg-init/extract.png" alt="" /></p> <p>ç„¶åæ‰“å¼€</p> <p><img src="/images/2017-04-02-scale-jpg-init/app.png" alt="" /></p> <p>è¿™é‡Œæœ‰å‡ ä¸ªé€‰é¡¹, åœ¨MenuBar - Edit - Setting</p> <p><img src="/images/2017-04-02-scale-jpg-init/setting.png" alt="" /></p> <ul> <li> <p>ç¬¬ä¸€ä¸ªInitial Scale: åˆå§‹å‹ç¼©å¤§å°, å°±æ˜¯æˆ‘ç¬¬ä¸€ä¸ªå°è¯•çš„ç…§ç‰‡å°ºå¯¸(ç™¾åˆ†æ¯”)</p> </li> <li> <p>ç¬¬äºŒä¸ªScale Step: æ¯æ­¥å‡å°‘çš„ç™¾åˆ†ç™¾</p> <ul> <li>è¿™ä¸¤ä¸ªä¸€èˆ¬ä¸ç”¨ç®¡</li> </ul> </li> <li> <p>æœ€åä¸€ä¸ªæ˜¯File Size, æ–‡ä»¶é™åˆ¶å¤§å°, å•ä½æ˜¯KB</p> </li> </ul> <p>ç‚¹OKä¿å­˜</p> <p>ç„¶åæŠŠæ–‡ä»¶æ‹–è¿›å»</p> <p><img src="/images/2017-04-02-scale-jpg-init/drag.png" alt="" /></p> <p>ç„¶ååœ¨åŸæ–‡ä»¶ç›®å½•ä¸‹å°±ç”Ÿæˆå¥½äº†ç¼©æ”¾å¥½çš„æ–‡ä»¶(orginal name-scaled.jpg)</p> <p>å¥½, æå®š!</p> <div class="date-highlight"> <!--2--> <a class="tag" href="/tag/javafx">JavaFX</a> &nbsp;&sdot;&nbsp; <a class="tag" href="/tag/project">Project</a> </div> </div> </div> <script src="/js/canvas.js"></script> <script> (function() { var img = new Image(); function getResult(event) { var imgType = "png"; (event && event.type === 'load' ? img.width == 1 : false) && (imgType = "webp"); $(".block-left").css("background-image", "linear-gradient(rgba(44, 45, 51, 0.8), rgba(44, 45, 51, 0.8)), url(/images/background.png)".replace(/\.png/,"." + imgType)); } img.onerror = getResult; img.onload = getResult; img.src = 'data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA='; })(); </script> </body> </html>
